# Lab3 测试覆盖度综合报告

## 实验概览
- **实验目标**: 针对Lab1的queryBridgeWords函数设计并执行黑盒测试和白盒测试
- **测试对象**: `public String queryBridgeWords(String word1, String word2)`
- **实验完成时间**: 2024年
- **Git分支管理**: Lab3b (黑盒测试), Lab3w (白盒测试)

## 测试方法对比

| 测试方法 | 测试用例数 | 通过率 | 主要发现 |
|----------|------------|--------|----------|
| 黑盒测试 | 8个 | 87.5% (7/8) | 发现空字符串处理缺陷 |
| 白盒测试 | 10个 | 100% (10/10) | 验证修复后代码100%路径覆盖 |

## 覆盖度分析

### 功能覆盖度
| 功能点 | 黑盒测试覆盖 | 白盒测试覆盖 | 综合评价 |
|--------|--------------|--------------|----------|
| null输入处理 | ❌ | ✅ | 白盒测试补充了此场景 |
| 空字符串处理 | ❌ (发现bug) | ✅ | 通过黑盒测试发现问题，白盒测试验证修复 |
| 单词存在性检查 | ✅ | ✅ | 两种方法都充分覆盖 |
| 无桥接词情况 | ✅ | ✅ | 覆盖充分 |
| 单个桥接词 | ❌ | ✅ | 白盒测试通过构造数据实现覆盖 |
| 多个桥接词 | ❌ | ✅ | 白盒测试覆盖了格式化逻辑的所有分支 |
| 大小写转换 | ✅ | ✅ | 两种方法都验证了此功能 |

### 路径覆盖度分析

#### 黑盒测试路径覆盖
```
总路径数: 9条独立路径
覆盖路径: 4条
覆盖率: 44.4%
```

**已覆盖路径:**
- 单词不存在错误路径
- 无桥接词路径  
- 正常错误消息格式路径
- 大小写转换路径

**未覆盖路径:**
- null输入路径
- 空字符串路径 (测试中断)
- 单个桥接词路径
- 多个桥接词的各种格式化分支

#### 白盒测试路径覆盖
```
总路径数: 9条独立路径
覆盖路径: 9条
覆盖率: 100%
```

**完全覆盖的路径:**
1. null输入路径
2. 空字符串输入路径
3. 单词不在图中路径
4. 无桥接词路径
5. 单个桥接词路径
6. 多个桥接词-第一个分支
7. 多个桥接词-中间分支
8. 多个桥接词-最后分支
9. word1无邻居路径

### 语句覆盖度
- **黑盒测试**: ~60% (估算，基于执行的代码路径)
- **白盒测试**: 100% (所有可执行语句都被执行)
- **综合覆盖**: 100%

### 分支覆盖度
- **黑盒测试**: ~50% (主要分支被覆盖，但格式化分支未覆盖)
- **白盒测试**: 100% (所有if/else分支都被测试)
- **综合覆盖**: 100%

### 条件覆盖度
- **黑盒测试**: ~60% (基本条件覆盖，但组合条件不完整)
- **白盒测试**: 100% (所有条件的真假值都被测试)
- **综合覆盖**: 100%

## 缺陷发现与修复

### 黑盒测试发现的问题
1. **空字符串处理缺陷**
   - **现象**: TC07测试在空字符串输入时中断
   - **原因**: 未对空字符串进行预先检查，直接调用toLowerCase()可能出现问题
   - **严重程度**: 中等
   - **修复状态**: ✅ 已修复

### 代码改进
修复前：
```java
public String queryBridgeWords(String word1, String word2) {
    word1 = word1.toLowerCase();  // 可能出现空字符串问题
    word2 = word2.toLowerCase();
    // ...
}
```

修复后：
```java
public String queryBridgeWords(String word1, String word2) {
    // 添加输入验证
    if (word1 == null || word2 == null) {
        return "Error: Input words cannot be null.";
    }
    if (word1.isEmpty() || word2.isEmpty()) {
        return "No " + word1 + " or " + word2 + " in the graph!";
    }
    
    word1 = word1.toLowerCase();
    word2 = word2.toLowerCase();
    // ...
}
```

## 测试数据质量

### 黑盒测试数据
- **数据来源**: Easy Test.txt (真实文本数据)
- **优点**: 真实场景，自然的单词关系
- **缺点**: 无法保证覆盖所有边界情况

### 白盒测试数据
- **数据来源**: 手工构造的测试图
- **优点**: 精确控制，确保路径覆盖
- **缺点**: 人工数据，可能缺乏真实性

### 综合评价
两种测试数据互补：
- 黑盒测试验证真实场景下的功能正确性
- 白盒测试确保代码逻辑的完整覆盖

## 测试工具和技术

### 使用的测试技术
1. **等价类划分**: 系统划分输入空间
2. **边界值分析**: 测试边界条件
3. **基本路径测试**: 确保路径覆盖
4. **反射技术**: 构造专用测试环境
5. **Git分支管理**: 隔离不同类型的测试

### 测试自动化
- **测试执行**: 自动化执行所有测试用例
- **结果验证**: 自动断言和结果检查
- **报告生成**: 自动输出测试结果

## 质量指标总结

| 指标 | 黑盒测试 | 白盒测试 | 综合结果 |
|------|----------|----------|----------|
| 功能覆盖率 | 70% | 100% | 100% |
| 语句覆盖率 | ~60% | 100% | 100% |
| 分支覆盖率 | ~50% | 100% | 100% |
| 路径覆盖率 | 44.4% | 100% | 100% |
| 缺陷发现 | 1个 | 0个 | 1个已修复 |

## 经验总结

### 黑盒测试的价值
1. **用户视角**: 从用户角度验证功能正确性
2. **缺陷发现**: 能发现开发者容易忽视的边界问题
3. **真实场景**: 使用真实数据验证功能

### 白盒测试的价值
1. **逻辑验证**: 确保所有代码路径都被测试
2. **覆盖度保证**: 提供量化的覆盖度指标
3. **回归测试**: 为代码修改提供可靠的验证

### 测试方法互补性
- **黑盒测试**: 发现问题，验证需求
- **白盒测试**: 验证修复，确保覆盖

### 改进建议
1. **测试数据多样化**: 结合真实数据和构造数据
2. **持续集成**: 将测试集成到开发流程中
3. **覆盖度监控**: 持续监控和改善测试覆盖度
4. **自动化程度**: 进一步提高测试自动化水平

## 结论

通过Lab3的实验，我们成功地为queryBridgeWords函数建立了完整的测试体系：

1. **测试完整性**: 黑盒测试和白盒测试相结合，实现了100%的综合覆盖
2. **质量保证**: 发现并修复了1个重要缺陷，提高了代码健壮性
3. **方法论验证**: 验证了系统化测试方法的有效性
4. **工程实践**: 通过Git分支管理实现了规范的测试流程

本次实验表明，系统的测试设计和执行对于保证软件质量具有重要价值，黑盒测试和白盒测试各有特点，相互补充，共同构成了完整的质量保证体系。 